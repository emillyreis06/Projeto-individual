<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style-form.css">
    <title>Formulário</title>
</head>
<body>
    <header>
        <h1>Formulário</h1>
        <p>Responda o formulário para adquirir seu treino personalizado!</p>
    </header>

    <div class="conteudo">
    <section class="pergunta1">
        <h3>1. Qual a sua faixa etária?</h3>
            <select name="" id="select_faixa_etaria">
                <option value="#">Selecione sua idade</option>
                <option value="15-20">15-20</option>
                <option value="20-25">20-25</option>
                <option value="25-30">25-30</option>
                <option value="30-35">30-35</option>
                <option value="40+">40+</option>
            </select>           
    </section>

    <section class="pergunta2">
        <h3>2.Você se identifica com qual genêro?</h3>
        <select name="" id="select_genero">
            <option value="#">Selecione genêro</option>
            <option value="Feminino">Feminino</option>
            <option value="Masculino">Masculino</option>
        </select>
    </section>

    <section class="pergunta3">
        <h3>3.Você pratica atividade física?</h3>
         <select name="" id="select_pratica_ativFisica">
            <option value="#">Selecione </option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
        </select>
    </section>
    
    <section class="pergunta4"> 
        <h3>4.Se sim, qual ?</h3>
        <select name="" id="select_ativFisica">
            <option value="#">Selecione a atividade física</option>
            <option value="Musculação">Musculação</option>
            <option value="Crossfit">Crossfit</option>
            <option value="Esportes">Esportes</option>
            <option value="Outro">Outro</option>
        </select>
    </section>

    <section class="pergunta5">
        <h3>5. Com que frequência você pratica atividade física?</h3>
        <select name="" id="select_freq">
            <option value="#">Selecione</option>
            <option value="1 a 3 vezes por semana">1 a 3 vezes por semana</option>
            <option value="4 a 6 vezes por semana">4 a 6 vezes por semana</option>
            <option value="Todos os dias da semana">Todos os dias da semana</option>
            <option value="Não prático">Não prático</option>
        </select>
    </section>

      <section class="pergunta6">
        <h3>6. Qual o seu tipo de treino preferido?</h3>
        <select name="" id="select_treinoPref">
            <option value="#">Selecione</option>
            <option value="Treino de posterior">Treino de posterior</option>
            <option value="Treino de quadríceps">Treino de quadríceps</option>
            <option value="Treino de costas">Treino de costas</option>
            <option value="Treino de bíceps/tríceps">Treino de bíceps/tríceps</option>
            <option value="Treino de ombro">Treino de ombro</option>
        </select>
    </section>

          <section class="pergunta7">
        <h3>7. Por que você pratica atividade física?</h3>
        <select name="" id="select_objetivo">
            <option value="#">Selecione treino</option>
            <option value="Ganhar massa magra">Ganhar massa magra</option>
            <option value="Emagrecer">Emagrecer</option>
            <option value="Bem estar físico e mental">Bem estar físico e mental</option>
            <option value="Saúde">Saúde</option>
            <option value="Outro">Outro</option>
        </select>
    </section>

        <div class="botao">
            <button onclick="treino()">Gerar Treino</button>
        </div>
    </div>

    <div class="card" id="card">
       <div id="div_mensagem"></div>
       <button onclick="dash()" id="btn_dash" style="display: none;">Ver Resultados</button>
      </div>
</body>
</html>

<script>
         var fkUsuario = sessionStorage.ID_USUARIO
     
    function treino(){
     var faixaEtaria = select_faixa_etaria.value;
     var pratica = select_pratica_ativFisica.value;
     var genero = select_genero.value;
     var ativFisica = select_ativFisica.value;
     var frequencia = select_freq.value
     var treinoPref = select_treinoPref.value;
     var obj = select_objetivo.value;

     console.log (fkUsuario)
    

     if (faixaEtaria == "" || pratica == "" || genero == "" || ativFisica == "" ||
         frequencia == "" || treinoPref == "" || obj == ""){
             card.style.display = "block";
             div_mensagem.innerHTML = "Preencha todos os campos para obter seu treino "
             btn_dash.style.display = 'inline-block'
             return false; // impede que os dados sejam enviados para o back se houver algum erro
     }

     else if (treinoPref == "Treino de posterior"){
        // matriz
         treinosPosterior = [
             ['Stiff','Cadeira-Flexora', 'Mesa-Flexora', 'Flexora unilateral'],
             ['Stiff com halter', 'Gemêos', 'Cadeira- Flexora','Levantamento terra sumô']
        ]

        var aleatorio = parseInt(Math.random() * treinosPosterior.length);
        var resultado = treinosPosterior[aleatorio]
        card.style.display = "block";
        div_mensagem.innerHTML = `${resultado}`
        btn_dash.style.display = 'inline-block'
    }
    else if (treinoPref == "Treino de quadríceps"){
        treinosQuadriceps = [
            ['Cadeira-Extensora', 'Agachamento no smith', 'Leg-Press','Afundo com halter', 'Passada'],
            ['Cadeira Abdutora', 'Cadeira Adutora', 'Hack', 'Leg-Press', 'Agachamento Búlgaro']
        ]

        var aleatorio = parseInt(Math.random()* treinosQuadriceps.length)
        var resultado = treinosQuadriceps[aleatorio]
        card.style.display = "block";
        div_mensagem.innerHTML = `${resultado}`
        btn_dash.style.display = 'inline-block'
    } 
    else if (treinoPref == "Treino de costas"){
        treinosCostas = [
            ['Puxada alta', 'Triangulo na polia', 'Serrote', 'Remada curvada'], 
            ['Barra fixa', 'Remada baixa','Remada com corda na polia','Puxada na polia']
        ]

        var aleatorio = parseInt(Math.random()* treinosCostas.length);
        var resultado = treinosCostas[aleatorio]
        card.style.display = "block";
        div_mensagem.innerHTML = `${resultado}`
        btn_dash.style.display = 'inline-block'
    }
    else if (treinoPref == "Treino de bíceps/tríceps"){
        treinosBraco = [
            ['Triceps corda', 'Triceps testa','Triceps no banco', 'Elevação lateral'],
            ['Rosca com corda', 'Rosca martelo', 'Rosca com barra W', 'Rosca com halteres no banco']
        ]
        var aleatorio = parseInt(Math.random()* treinosBraco.length)
        var resultado = treinosBraco[aleatorio]
        card.style.display = "block";
        div_mensagem.innerHTML = `${resultado}`
        btn_dash.style.display = 'inline-block'
    } 
    else if (treinoPref == "Treino de ombro") {
        treinosOmbro = [
            ['Elevação lateral', 'Desenvolvimento máquina','Desenvolvimento com halteres', 'Elevação frontal'],
            ['Encolhimento de ombro', 'Elevação lateral', 'Crucifixo inverso', 'Remada alta']
        ]
        var aleatorio = parseInt(Math.random()* treinosOmbro.length)
        var resultado = treinosOmbro[aleatorio]
        card.style.display = "block";
        div_mensagem.innerHTML = `${resultado}`
        btn_dash.style.display = 'inline-block'
    }


        fetch("/formulario/gerarTreino", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({

        faixaEtariaServer: faixaEtaria,
        generoServer: genero,
        praticaServer: pratica,
        ativFisicaServer: ativFisica,
        frequenciaServer: frequencia,
        treinoPrefServer: treinoPref,
        objServer: obj,
        fkUsuarioServer: fkUsuario
        
      }),
    })
        .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (!resposta.ok) {
          cardErro.style.display = "block";
          div_mensagem.innerHTML =
            "Houve um erro ao tentar preencher suas informações";   
        } 
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
    
      });

    return false;
  }

  function dash(){
    window.location.href = "./dashboard/cards.html";
  }

</script>